"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[86683,6863],{983617:(e,s,t)=>{t.d(s,{Z:()=>n});var a=t(773285),_=t(19121);let n=()=>{let{checkExperiment:e}=(0,a.F)(),s=(0,_.Z)(),t=!!s.isAuth&&s.isPartner;return!!t&&!!(e("web_m10n_business_hierarchy_alpha").anyEnabled||e("aid_exp_global_account_switcher_beta").anyEnabled||e("aid_exp_global_account_switcher_ga").anyEnabled)}},812173:(e,s,t)=>{t.d(s,{FE:()=>N,lG:()=>C,d9:()=>R});var a=t(667294),_=t(616550),n=t(983617),r=t(558211),i=t(773285),E=t(19121),S=t(67347);let l=()=>{let e=(0,E.Z)(),{checkExperiment:s}=(0,i.F)(),t=(0,n.Z)()&&s("web_m10n_business_reporting_business_entity_service").anyEnabled,[_,l]=(0,a.useState)({isReady:!1}),d=(0,a.useCallback)(async({entityId:e,actingBusinessId:s,favorites:a})=>{t&&(await (0,r.yo)({entityId:e,actingBusinessId:s,favorites:a}),l(e=>{let t={...e,actingBusinessId:s};if(a){var _;t.favoriteAdAccounts={favoriteAdAccountsMap:{...(null===(_=e.favoriteAdAccounts)||void 0===_?void 0:_.favoriteAdAccountsMap)||{},[a.actingBusinessId]:{advertiserId:a.adAccounts}}}}return t}))},[t]);return(0,a.useEffect)(()=>{t&&e.isAuth&&!_.isReady&&(async()=>{let s=!1;try{let s=await (0,r.SF)({entityId:e.id});l(e=>({...e,...s}))}catch(e){s=!0}finally{(0,S.nP)("globalAccountSwitcher.getFavoriteAdAccounts",{sampleRate:1,tags:{businessId:e.id,hasError:s}}),l(e=>({...e,isReady:!0}))}})()},[_.isReady,t,e]),{accountSwitcherConfig:_,setConfig:d}};var d=t(505025),c=t(407043),o=t(425288),u=t(53987),A=t(826067),T=t(433835),p=t(721344),I=t(785893);let{Provider:y,useHook:R}=(0,o.Z)("AccountSwitcherContext"),C=e=>e.search&&(0,A.mB)(e.search).advertiserId,N=({children:e})=>{let s=(0,_.useLocation)(),{params:{userBizId:t,businessHierarchyId:i,advertiserId:S,username:o}}=(0,_.useRouteMatch)(),A=C(s),R=(0,E.Z)(),[N,m]=(0,a.useState)(""),[O,P]=(0,a.useState)(null),[U,D]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[L,h]=(0,a.useState)(null),[M,B]=(0,a.useState)(!1),g=(0,n.Z)(),{logContextEvent:f}=(0,c.v)(),{accountSwitcherConfig:G,setConfig:w}=l();(0,a.useEffect)(()=>{i?m(i):m("")},[i]);let H=(0,a.useCallback)(async({id:e,username:s})=>{let t=await (0,r.bG)({user_id:e,username:s});t&&v({type:e?d.Oz.BUSINESS_ACCOUNT:d.Oz.PROFILE,id:e||t.id,name:t.full_name,img:t.image_medium_url,username:s}),B(!1)},[]),$=(0,p.rc)(o);(0,a.useEffect)(()=>{(0,u.cD)(s)&&b&&$!==o&&o===R.username&&(H({username:R.username}),h({id:R.id||"",name:R.fullName||"",img:R.imageMediumUrl||""}),P({type:d.nt,id:R.id}))},[s,$,H,b,o,R.fullName,R.id,R.imageMediumUrl,R.username]),(0,a.useEffect)(()=>{let e=async({businessId:e,assetId:s})=>{if(!e){B(!1);return}try{let{data:{data:{asset:t,type:a}}}=await (0,T.G2)({businessId:e,assetId:s,resourceType:"AD_ACCOUNT",includeAssetSummary:!0});v({id:s,name:t.name,img:"",type:a})}catch(e){v({id:R.id||"",name:R.fullName||"",img:R.imageMediumUrl||"",type:d.Oz.BUSINESS_ACCOUNT})}B(!1)},a=async({id:e})=>{let s=await (0,r.p)({hierarchyId:e});v({id:e,name:null!=s&&s.data?s.data.name:"",img:null!=s&&s.data?s.data.img_medium_url:"",type:d.Oz.BUSINESS_HIERARCHY}),B(!1)};if(R.isAuth&&g&&!b){let _=(0,u.TI)(s)||(0,u.h3)(s),n=S||!!A&&!_;B(!0),i?a({id:i}):t?H({id:t}):o?H({username:o}):n?e({businessId:R.id,assetId:S||A||""}):(v({type:d.Oz.BUSINESS_ACCOUNT,id:R.id||"",name:R.fullName||"",img:R.imageMediumUrl||""}),B(!1))}},[b,R,i,t,o,S,A,L,g,s,H,M]),(0,a.useEffect)(()=>{let e=new URLSearchParams(s.search);L||e.has("actingBusinessId")||h({id:R.id||"",name:R.fullName||"",img:R.imageMediumUrl||""})},[L,s.search,R]);let Z=(0,a.useMemo)(()=>({activePanel:O,selectedHierarchyId:N,switcherOpen:U,openAccountSwitcher:()=>{if(f({event_type:101,view_type:608,component:14346}),!O){if((0,u.TI)(s))P({type:d.v8});else{let e=new URLSearchParams(s.search),t=e.get("actingBusinessId");P({type:d.nt,id:null!=t?t:null==L?void 0:L.id})}}D(!0)},closeAccountSwitcher:()=>D(!1),openAssetPanel:e=>{P({type:d.nt,id:e})},closeAssetPanel:()=>{P({type:d.v8})},actingBusiness:L,selectedAccount:b,setSelectedAccount:v,setActingBusiness:h,accountSwitcherConfig:G,setConfig:w}),[O,N,U,L,b,G,w,f,s]);return(0,I.jsx)(y,{value:Z,children:e})}},453933:(e,s,t)=>{t.d(s,{C:()=>p,H:()=>I});var a=t(667294),_=t(983617),n=t(505025),r=t(558211),i=t(56641),E=t(326884),S=t(668040),l=t(425288),d=t(186656),c=t(401060),o=t(19121),u=t(321545),A=t(785893);let{Provider:T,useHook:p}=(0,l.Z)("BusinessHierarchyContext"),I=({children:e})=>{let[s,t]=(0,a.useState)([]),[l,p]=(0,a.useState)(!1),[I,y]=(0,a.useState)(!1),[R,C]=(0,a.useState)({}),[N,m]=(0,a.useState)(null),[O,P]=(0,a.useState)([]),[U,D]=(0,a.useState)({}),b=(0,u.Z)(),v=(0,a.useRef)(b),L=(0,o.Z)(),h=(0,_.Z)(),M=(0,a.useRef)({}),B=(0,a.useCallback)((e,s)=>{let t;s===n.Oz.BUSINESS_HIERARCHY?t=(0,S.Z)(E.Q6.DASHBOARD,"","",e):s===n.Oz.BUSINESS_ACCOUNT&&(t=(0,S.Z)(E.Q6.DASHBOARD,e));let a=(0,c.Z)({site:"www",path:t});(0,i.Z)(a)},[]),g=(0,a.useCallback)(async e=>{if(!h)return[];if(y(!0),M.current[e])return y(!1),M.current[e];{let s=await (0,d.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:e}}),{data:t}=s.resource_response,a=t&&t.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=n.Oz.USER_ACCOUNT,e))),e))||[],_=/^\d+$/.test(e),i=RegExp(e.toLowerCase(),"g"),E=[];N||m(E=await v.current());let S=null!=N?N:E,l=S.filter(s=>{if(_)return s.id.includes(e);let t=s.user.full_name.toLowerCase();return t.match(i)}).map(r.IT),c=[...a.map(e=>e.id),...l.map(e=>e.id)],o=_?(L.id||"").includes(e):(L.fullName||"").toLowerCase().match(i);return L.isAuth&&o&&c.push(L.id),M.current[e]=c,y(!1),c}},[h,v,L.id,L.fullName,L.isAuth,N]),{id:f="",username:G="",email:w="",fullName:H="",imageSmallUrl:$="",imageMediumUrl:Z="",isAuth:V}=L,F=async e=>{if((!V||!h||N)&&!e)return;p(!0);let s=[];try{let e=await (0,d.Z)({url:"ads/v4/business_access/business_hierarchies/"}),{data:a}=e.resource_response;s=a&&a.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=n.Oz.USER_ACCOUNT,e))),e))||[],t(s)}catch(e){t([])}try{let e=[];N||(e=await v.current(),m(e));let t=null!=N?N:e;P(t.map(r.IT)),D(t.reduce((e,s)=>(e[s.id]=s.business_roles||[],e),{})),C((0,r.WP)({id:f,username:G,email:w,fullName:H,imageSmallUrl:$,imageMediumUrl:Z})),M.current[""]=[...s.map(e=>e.id),...t.map(r.IT).map(e=>e.id),f],p(!1)}catch(e){p(!1)}},z=(0,a.useCallback)(F,[f,G,w,H,$,Z,V,h,N]),x=(0,a.useCallback)(e=>s.some(s=>s.id===e||s.children.some(s=>s.id===e||s.user.id===e)),[s]),Y=(0,a.useCallback)(e=>s.map(e=>"BUSINESS_HIERARCHY"===e.entity_type?e:null).find(s=>!!s&&s.children.some(s=>s.user.id===e)),[s]),k=(0,a.useMemo)(()=>({businessHierarchies:[...R.id&&!x(R.id)?[R]:[],...s,...O.filter(e=>!x(e.id))],switchAccount:B,searchAccounts:g,loadingAccounts:l,isSearchingAccounts:I,fetchData:z,getParentHierarchyForIdIfExists:Y,viewerRolesOfEachEmployer:U}),[s,B,g,O,l,I,R,z,x,Y,U]);return(0,A.jsx)(T,{value:k,children:e})}},558211:(e,s,t)=>{t.d(s,{IT:()=>l,SF:()=>A,Vq:()=>S,WP:()=>d,Yu:()=>u,bG:()=>o,p:()=>c,yo:()=>T});var a=t(214494),_=t(505025),n=t(186656),r=t(925672),i=t(180548),E=t(785893);let S=e=>({id:e.id,entity_type:_.Oz.BUSINESS_ACCOUNT,user:{id:e.user.id,entity_type:_.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),l=e=>({id:e.id,entity_type:_.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:_.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),d=e=>({id:e.id,entity_type:_.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:_.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),c=async({hierarchyId:e})=>{let s=await (0,n.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`});return s.resource_response},o=async({user_id:e,username:s})=>{if(!s&&!e)return null;let t=await a.Z.create("UserResource",{user_id:e,username:s}).callGet(),{resource_response:{data:_}}=t;return _},u=(0,E.jsx)("hr",{style:{borderTop:"1px solid #e9e9e9"}}),A=async({entityId:e})=>{let s=await (0,r.FO)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]),t=s[0];if(!(t&&t.properties))return{};let a=t.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG;return a},T=async({entityId:e,actingBusinessId:s,favorites:t})=>{let a={};(0,i.k)(s)||(a.actingBusinessId=s),t&&(a.favoriteAdAccounts={favoriteAdAccountsMap:{[t.actingBusinessId]:{advertiserId:t.adAccounts}}}),Object.keys(a).length>0&&await (0,r.RM)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:a}}])}},668040:(e,s,t)=>{t.d(s,{Z:()=>n});let a="/business/business-manager/",_="/business/business-hierarchy/",n=(e,s,t,n)=>{switch(e){case"DASHBOARD":return n?`${_}${String(n)}/dashboard/`:`${a}${String(s)}/dashboard/`;case"PEOPLE":return`${a}${String(s)}/employees/`;case"PARTNERS":return`${a}${String(s)}/partners/`;case"AD_ACCOUNTS":return`${a}${String(s)}/ad-accounts/`;case"HISTORY":return`${a}${String(s)}/history/`;case"PEOPLE_DETAIL":return`${a}${String(s)}/employees/${String(t)}/details/`;case"PARTNERS_DETAIL":return`${a}${String(s)}/partners/${String(t)}/details/`;case"SHARED_PARTNERS_DETAIL":return`${a}${String(s)}/shared/${String(t)}/details/`;case"AD_ACCOUNTS_DETAIL":return`${a}${String(s)}/ad-accounts/${String(t)}/details/`;case"PENDING_AD_ACCOUNTS_DETAIL":return`${a}${String(s)}/ad-accounts/pending/${String(t)}/details/`;case"PEOPLE_INVITES":return`${a}${String(s)}/employees/invites/`;case"PEOPLE_PENDING_TAB":return`${a}${String(s)}/employees/pending/`;case"PARTNERS_PENDING_TAB":return`${a}${String(s)}/partners/pending/`;case"AD_ACCOUNTS_PENDING_TAB":return`${a}${String(s)}/ad-accounts/pending`;case"PARTNERS_INVITE_PAGE":return`${a}${String(s)}/partners/invites/`;case"PARTNERS_REQUEST_PAGE":return`${a}${String(s)}/partners/requests/`;case"PROFILES":return`${a}${String(s)}/profiles/`;case"PROFILES_DETAIL":return`${a}${String(s)}/profiles/${String(t)}/details/`;case"BUSINESS_SECURITY":return`${a}${String(s)}/security/`;case"SUPPORT_TOOL":return`${a}${String(s)}/support/`;case"ASSET_GROUPS":return t?`${a}${String(s)}/asset-groups/?asset_group_id=${String(t)}`:`${a}${String(s)}/asset-groups/`;case"INVOICE_MANAGEMENT":return`${a}${String(s)}/invoice-management/`;case"BUSINESS_HIERARCHY":return`${_}${String(n)}/hierarchy/`;case"BUSINESS_HIERARCHY_BUSINESS_SECURITY":return`${_}${String(n)}/business_security/`;case"MANAGERS":return`${_}${String(n)}/managers/`;case"AUDIENCES":return`${a}${String(s)}/audiences/`;case"SHARED_TAGS":return`${a}${String(s)}/shared-tags/`;case"CATALOGS":return`${a}${String(s)}/catalogs/`;default:return a}}},15099:(e,s,t)=>{t.d(s,{QK:()=>u,ZP:()=>o,o1:()=>A});var a=t(667294),_=t(172045),n=t(812173),r=t(407043),i=t(339363),E=t(19121),S=t(273453);let l={BUSINESS_ACCESS_EMPLOYEES_ACTIVE:3653,BUSINESS_ACCESS_EMPLOYEES_PENDING:3654,BUSINESS_ACCESS_EMPLOYEE_DETAIL_AD_ACCOUNTS:3655,BUSINESS_ACCESS_EMPLOYEE_DETAIL_PROFILES:3656,BUSINESS_ACCESS_PARTNERS_ACTIVE:3657,BUSINESS_ACCESS_PARTNERS_PENDING:3658,BUSINESS_ACCESS_PARTNER_DETAIL_AD_ACCOUNTS:3659,BUSINESS_ACCESS_PARTNER_DETAIL_PROFILE:3660,BUSINESS_ACCESS_AD_ACCOUNTS:3661,BUSINESS_ACCESS_AD_ACCOUNT_PARTNERS:3662,BUSINESS_ACCESS_AD_ACCOUNT_EMPLOYEES:3663,BUSINESS_ACCESS_PROFILES:3664,BUSINESS_ACCESS_PROFILE_DETAIL_EMPLOYEES:3665,BUSINESS_ACCESS_PROFILE_DETAIL_PARTNERS:3666,BUSINESS_ACCESS_HISTORY:3667,BUSINESS_ACCESS_DASHBOARD:3668,BUSINESS_ACCESS_REDIRECT:3670,BIZ_HUB_PAGE:3507,BUSINESS_ACCESS_INVITE_ACCEPTED:3699,BUSINESS_ACCESS_INVITE_ERROR:3700,BUSINESS_ACCESS_SUPPORT_TOOL_ACTIVE:3811,BUSINESS_ACCESS_BUSINESS_SECURITY:3785,BUSINESS_ACCESS_BUSINESS_HIERARCHY:3828,BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY:3973,BUSINESS_ACCESS_ASSET_GROUPS:3845,BUSINESS_ACCESS_MANAGERS:3832,BUSINESS_ACCESS_INVOICE_MANAGEMENT:3838,BUSINESS_ACCESS_AUDIENCES:3882,BUSINESS_ACCESS_SHARED_TAGS:3917,BUSINESS_ACCESS_BUSINESS_HIERARCHY_INVITE:3924,BUSINESS_ACCESS_CATALOGS:3985},d={BUSINESS_ACCESS_FORM:13939,BUSINESS_ACCESS_TABLE:13940,BUSINESS_ACCESS_SHEET:13941,BUSINESS_ACCESS_MODAL:13942,BUSINESS_ACCESS_CONTAINER:13943,BUSINESS_ACCESS_NAVIGATION:13944},c={BUSINESS_ACCESS_BUTTON:12698,BUSINESS_ACCESS_FIELD:12699,BUSINESS_ACCESS_TAB:12700,BUSINESS_ACCESS_LINK:11719,BUSINESS_ACCESS_TOOLTIP:12701,BUSINESS_ACCESS_TAP:12702},o=e=>{let{logContextEvent:s}=(0,r.v)(),t=(0,S.KJ)(),o=(0,S.KJ)(!0),u=t||o,{selectedHierarchyId:A}=(0,n.d9)(),T=(0,E.Z)(),p=T.isAuth?T.id:void 0,[I]=(0,a.useState)(()=>{let e=(0,i.qn)("businessAccessUUID");return e||((0,i.Nh)("businessAccessUUID",(0,_.Z)()),(0,i.qn)("businessAccessUUID"))});return e?t=>{if("BUSINESS_ACCESS_PAGE_VIEW"===t.eventName){let{eventName:a,..._}=t;s({event_type:8960,aux_data:{..._,user_id:p,business_id:u,session_id:I,business_hierarchy_id:A},view_type:465,view_parameter:l[e]});return}if("BUSINESS_ACCESS_ERROR"===t.eventName){let{eventName:a,elementId:_,componentId:n,element:r,component:i,errorClass:E,errorMessage:S,...o}=t;s({event_type:8961,aux_data:{...o,user_id:p,business_id:u,error_class:E,error_message:S,session_id:I,element_id:_,component_id:n,business_hierarchy_id:A},element:c[r],component:d[i],view_type:465,view_parameter:l[e]});return}let{eventName:a,elementId:_,componentId:n,element:r,component:i,...E}=t;s({event_type:9709,aux_data:{...E,user_id:p,element_id:_,business_id:u,component_id:n,session_id:I,business_hierarchy_id:A},view_type:465,element:c[r],component:d[i],view_parameter:l[e]})}:()=>{}},u=e=>{switch(e){case"PEOPLE":case"EMPLOYEES":case"EMPLOYEES_ACTIVE":return"BUSINESS_ACCESS_EMPLOYEES_ACTIVE";case"EMPLOYEES_PENDING":case"PEOPLE_INVITES":return"BUSINESS_ACCESS_EMPLOYEES_PENDING";case"PEOPLE_DETAIL":case"PEOPLE_DETAIL_AD_ACCOUNT":return"BUSINESS_ACCESS_EMPLOYEE_DETAIL_AD_ACCOUNTS";case"PEOPLE_DETAIL_PROFILES":return"BUSINESS_ACCESS_EMPLOYEE_DETAIL_PROFILES";case"PARTNERS":case"PARTNERS_ACTIVE":return"BUSINESS_ACCESS_PARTNERS_ACTIVE";case"PARTNERS_PENDING":case"PARTNERS_INVITE_PAGE":case"PARTNERS_REQUEST_PAGE":return"BUSINESS_ACCESS_PARTNERS_PENDING";case"PARTNERS_DETAIL":case"SHARED_PARTNERS_DETAIL":case"PARTNER_DETAIL":case"PARTNER_DETAIL_AD_ACCOUNTS":return"BUSINESS_ACCESS_PARTNER_DETAIL_AD_ACCOUNTS";case"PARTNER_DETAIL_PROFILE":return"BUSINESS_ACCESS_PARTNER_DETAIL_PROFILE";case"AD_ACCOUNTS":return"BUSINESS_ACCESS_AD_ACCOUNTS";case"AD_ACCOUNTS_DETAIL":case"AD_ACCOUNT_DETAIL":case"AD_ACCOUNT_DETAIL_PARTNERS":return"BUSINESS_ACCESS_AD_ACCOUNT_PARTNERS";case"AD_ACCOUNT_EMPLOYEES":return"BUSINESS_ACCESS_AD_ACCOUNT_EMPLOYEES";case"PROFILES":return"BUSINESS_ACCESS_PROFILES";case"PROFILES_DETAIL":case"PROFILE_DETAIL":case"PROFILE_DETAIL_EMPLOYEES":return"BUSINESS_ACCESS_PROFILE_DETAIL_EMPLOYEES";case"PROFILE_DETAIL_PARTNERS":return"BUSINESS_ACCESS_PROFILE_DETAIL_PARTNERS";case"HISTORY":return"BUSINESS_ACCESS_HISTORY";case"INVOICE_MANAGEMENT":return"BUSINESS_ACCESS_INVOICE_MANAGEMENT";case"DASHBOARD":return"BUSINESS_ACCESS_DASHBOARD";case"CHOOSER":case"REDIRECT":return"BUSINESS_ACCESS_REDIRECT";case"BUSINESS_SECURITY":return"BUSINESS_ACCESS_BUSINESS_SECURITY";case"BUSINESS_HIERARCHY":return"BUSINESS_ACCESS_BUSINESS_HIERARCHY";case"BUSINESS_HIERARCHY_BUSINESS_SECURITY":return"BUSINESS_ACCESS_BUSINESS_HIERARCHY_BUSINESS_SECURITY";case"ASSET_GROUPS":return"BUSINESS_ACCESS_ASSET_GROUPS";case"SUPPORT_TOOL":return"BUSINESS_ACCESS_SUPPORT_TOOL";case"MANAGERS":return"BUSINESS_ACCESS_MANAGERS";case"AUDIENCES":return"BUSINESS_ACCESS_AUDIENCES";case"SHARED_TAGS":return"BUSINESS_ACCESS_SHARED_TAGS";case"CATALOGS":return"BUSINESS_ACCESS_CATALOGS";default:return}},A=e=>{switch(e){case"PARTNER":return"BUSINESS_ACCESS_PARTNER_DETAIL_AD_ACCOUNTS";case"AOAA_REQUEST_DETAIL_PAGE":case"AD_ACCOUNT_PEOPLE":return"BUSINESS_ACCESS_AD_ACCOUNT_EMPLOYEES";case"AD_ACCOUNT_PARTNER":return"BUSINESS_ACCESS_AD_ACCOUNT_PARTNERS";case"PEOPLE":return"BUSINESS_ACCESS_EMPLOYEE_DETAIL_AD_ACCOUNTS";default:return}}},831508:(e,s,t)=>{t.r(s),t.d(s,{default:()=>U});var a=t(667294),_=t(702664),n=t(883119),r=t(319915),i=t(19121),E=t(616550),S=t(453933),l=t(326884),d=t(668040),c=t(15099),o=t(499128),u=t(898781),A=t(349700),T=t(343341),p=t(34639),I=t(6189),y=t(913033),R=t(785893);let C=({businessName:e,businessId:s,inviteId:t})=>{let[r,i]=(0,a.useState)(!1),C=(0,_.useDispatch)(),N=(0,u.ZP)(),{showToast:m}=(0,T.F9)(),O=(0,E.useHistory)(),P=(0,c.ZP)("BIZ_HUB_PAGE"),U=N.bt("Произошла ошибка. Повторите попытку позже.", "Oops! Something went wrong. Please try again later.", "[m10n]businessAccess.BizHub.EmployeeInviteBanner.GenericError", undefined, true),D=(0,p.Z)(),{fetchData:b}=(0,S.C)();return(0,R.jsx)(n.xu,{marginTop:8,children:(0,R.jsx)(n.UW,{iconAccessibilityLabel:N.bt("У вас есть запрос для сотрудника на рассмотрении.", "you have a pending employee invite", "[m10n]businessAccess.BizHub.PendingEmployeeInvite", undefined, true),message:N.bt("Вы получите доступ к рекламным аккаунтам и инструментам организации. Примите приглашение, чтобы начать работу.", "You will have access to work on their ad accounts and tools. Accept the invite to get started.", "[m10n]businessAccess.BizHub.EmployeeInviteBanner.Subtext", undefined, true),primaryAction:{accessibilityLabel:(0,A.nk)(N.bt("Принять приглашение от организации {{businessName}}", "Accept the invite from {{businessName}}", "[m10n]businessAccess.BizHub.Accept.AccessibilityLabel", undefined, true),{businessName:e}).join(""),label:N.bt("Принять", "Accept", "[m10n]businessAccess.BizHub.Accept.Label", undefined, true),disabled:r,onClick:()=>{i(!0),P({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"employee-invite-banner",element:"BUSINESS_ACCESS_BUTTON",elementId:"invite-accept-button",business_id:s}),C((0,I.Ol)({acceptInviteInterface:D,businessId:s,type:"MEMBER",inviteId:t,onSuccess:async()=>{C(y.U),await b(),O.push((0,d.Z)("DASHBOARD",s))},onError:()=>{i(!1),m(({hideToast:e})=>(0,R.jsx)(o.ZP,{onHide:e,text:U,type:"error"}))}}))}},secondaryAction:{accessibilityLabel:(0,A.nk)(N.bt("Отклонить приглашение от организации {{businessName}}", "Decline the invite from {{businessName}}", "[m10n]businessAccess.BizHub.Decline.AccessibilityLabel", undefined, true),{businessName:e}).join(""),label:N.bt("Отклонить", "Decline", "[m10n]businessAccess.BizHub.Decline.Label", undefined, true),disabled:r,onClick:()=>{i(!0),P({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"employee-invite-banner",element:"BUSINESS_ACCESS_BUTTON",elementId:"invite-decline-button",business_id:s}),C((0,I.dq)({acceptInviteInterface:D,businessId:s,type:"MEMBER",inviteId:t,onSuccess:()=>{C(y.U),m(({hideToast:s})=>(0,R.jsx)(o.ZP,{duration:l.QE,onHide:s,text:(0,A.nk)(N.bt("Приглашение от организации {{businessName}} отклонено.", "Successfully declined the invite from {{businessName}}.", "[m10n]businessAccess.BizHub.Decline.SuccessfulDecline", undefined, true),{businessName:e}).join("")}))},onError:()=>{i(!1),m(({hideToast:e})=>(0,R.jsx)(o.ZP,{onHide:e,text:U,type:"error"}))}}))}},title:(0,A.nk)(N.bt("Организация {{businessName}} приглашает вас работать от ее имени", "{{businessName}} invited you to work on their behalf", "[m10n]businessAccess.BizHub.EmployeeInviteBanner", undefined, true),{businessName:e}).join(""),type:"info"})})};var N=t(40145),m=t(704454),O=t(320843),P=t(39662);let U=()=>{let e=(0,_.useSelector)(P.U),s=(0,_.useDispatch)(),[t,E]=(0,a.useState)(!1),{id:S=""}=(0,i.Z)();(0,a.useEffect)(()=>{s(y.p)},[]),(0,a.useEffect)(()=>{S&&(s({type:"CLEAR_PENDING_DATA"}),s((0,m.R)(["PENDING"],"PARTNER",S)))},[S]);let l=(0,_.useSelector)((0,O.Gc)(S));return((0,a.useEffect)(()=>{S&&E(l)},[S,l]),0!==e.length||t)?(0,R.jsx)(n.xu,{children:(0,R.jsxs)(r.Z,{name:"BusinessAccessBusinessHubBanner",children:[e.slice(0,10).map(({id:e,businessName:s,businessId:t})=>(0,R.jsx)(C,{businessId:t,businessName:s,inviteId:e},`${e}-${s}`)),t&&(0,R.jsx)(n.xu,{marginTop:8,children:(0,R.jsx)(N.Z,{businessId:S})})]})}):null}},40145:(e,s,t)=>{t.d(s,{Z:()=>S});var a=t(883119),_=t(326884),n=t(668040),r=t(15099),i=t(898781),E=t(785893);let S=({businessId:e,page:s})=>{let t=(0,i.ZP)(),S=(0,r.ZP)(s?(0,r.QK)(s):"BIZ_HUB_PAGE");return(0,E.jsx)(a.UW,{iconAccessibilityLabel:t.bt("у вас есть приглашение или запрос от партнера на рассмотрении", "you have a pending partner invite or request", "[m10n]businessAccess.BizHub.PartnerBanner.Title", undefined, true),message:t.bt("Ознакомьтесь со списком партнеров на рассмотрении, чтобы ответить на приглашение или запрос.", "View pending partners to respond to the invite or request.", "[m10n]businessAccess.BizHub.PartnerBanner.Subtext", undefined, true),primaryAction:{accessibilityLabel:t.bt("Открыть данные партнеров на рассмотрении", "View pending partners", "[m10n]businessAccess.BizHub.PartnerBanner.AccessibilityLabel", undefined, true),label:t.bt("Открыть данные партнеров на рассмотрении", "View pending partners", "[m10n]businessAccess.BizHub.PartnerBanner.Label", undefined, true),href:(0,n.Z)(_.Q6.PARTNERS_PENDING_TAB,e),onClick:()=>{S({eventName:"BUSINESS_ACCESS_ACTION",component:"BUSINESS_ACCESS_CONTAINER",componentId:"partner-request-banner",element:"BUSINESS_ACCESS_LINK",elementId:"partner-request-banner-link",business_id:e})},role:"link"},title:t.bt("У вас есть партнер на рассмотрении", "You have a pending partner", "[m10n]businessAccess.BizHub.PartnerBanner.Title", undefined, true),type:"info"})}},34639:(e,s,t)=>{t.d(s,{Z:()=>n});var a=t(186656),_=t(773285);function n(){let{checkExperiment:e}=(0,_.F)(),{anyEnabled:s}=e("business_access_invites_api_v4_migration");return async({id:e,accept:t})=>{if(s){let s=await (0,a.Z)({url:`/ads/v4/business_access/invites/${e}/`,method:"POST",data:{accept_invite:t}});return s.resource_response.data}{let s=await (0,a.Z)({url:`/ads/internal/business_access/invites/${e}/`,method:"POST",data:{accept:t}});return s.resource_response.data}}}},321545:(e,s,t)=>{t.d(s,{Z:()=>n});var a=t(186656),_=t(780280);function n(){let{experimentsClient:e}=(0,_.B)();return async()=>{var s;let{anyEnabled:t}=null!==(s=e.checkExperiment("business_access_employees_api_v4_migration"))&&void 0!==s?s:{},_=await (0,a.Z)({url:t?"/ads/v4/business_access/businesses/me/employers/":"ads/internal/business_access/users/me/employers/"}),n=_.resource_response?_.resource_response.data:{data:[]};return await Promise.all(n&&n.data||[])}}},6189:(e,s,t)=>{t.d(s,{$R:()=>o,ED:()=>p,H7:()=>d,HC:()=>c,JJ:()=>y,Jl:()=>I,Ol:()=>E,UF:()=>u,YK:()=>l,c_:()=>A,dq:()=>i,hY:()=>T,wW:()=>S});var a=t(523909),_=t(704454),n=t(662297),r=t(320843);let i=({acceptInviteInterface:e,businessId:s,type:t,inviteId:a,onSuccess:n,onError:i})=>async(E,S)=>{let l=S();E({type:"DECLINE_INVITE"});let d=(0,r.t_)(l);try{await e({id:a,accept:!1}),n&&n(),E({type:"DECLINE_INVITE_SUCCESS"}),"PARTNER"===t&&E((0,_.R)(d,"PARTNER",s))}catch(e){E({type:"DECLINE_INVITE_ERROR",error:e}),i&&i(e.message)}},E=({acceptInviteInterface:e,businessId:s,type:t,inviteId:n,onSuccess:i,onError:E})=>async(S,l)=>{let d=l();S({type:"ACCEPT_INVITE"});let c=(0,r.t_)(d);try{await e({id:n,accept:!0}),i&&(S((0,a.Bw)(n)),i()),S({type:"ACCEPT_INVITE_SUCCESS"}),"PARTNER"===t&&S((0,_.R)(c,"PARTNER",s))}catch(e){S({type:"ACCEPT_INVITE_ERROR",error:e}),E&&E(e.message)}},S=(e,s)=>async t=>{t({type:"GET_INVITE_DATA"});try{let{data:{data:a}}=await (0,n.Ts)({businessId:s,inviteOrRequestId:e,type:"MEMBER_INVITE"});t({type:"GET_INVITE_DATA_SUCCESS",payload:{type:"members",[a.id]:a}})}catch(e){t({type:"GET_INVITE_DATA_ERROR",error:e})}},l=(e,s)=>async t=>{t({type:"GET_INVITE_DATA"});try{let{data:{data:a}}=await (0,n.Ts)({businessId:s,inviteOrRequestId:e,type:"PARTNER_INVITE"});t({type:"GET_INVITE_DATA_SUCCESS",payload:{type:"partners",[a.id]:a}})}catch(e){t({type:"GET_INVITE_DATA_ERROR",error:e})}},d=()=>e=>e({type:"CLEAR_PARTNER_INVITE_DATA"}),c=()=>e=>e({type:"CLEAR_PARTNER_REQUEST_DATA"}),o=(e,s)=>async t=>{t({type:"GET_REQUEST_DATA"});try{let{data:{data:a}}=await (0,n.Ts)({businessId:s,inviteOrRequestId:e,type:"PARTNER_REQUEST"});t({type:"GET_REQUEST_DATA_SUCCESS",payload:{type:"partners",[a.id]:a}})}catch(e){t({type:"GET_REQUEST_DATA_ERROR",error:e})}},u=({businessId:e,type:s,inviteId:t,onSuccess:a,onError:i})=>async(E,S)=>{let l=S(),d=(0,r.t_)(l);E({type:"DELETE_INVITE"});try{await (0,n.UF)({businessId:e,inviteId:t,type:"MEMBER"===s?"MEMBER_INVITE":"PARTNER_INVITE"}),a(),E({type:"DELETE_INVITE_SUCCESS"}),E((0,_.R)(d,s,e))}catch(e){E({type:"DELETE_INVITE_ERROR",error:e}),i(e.message)}},A=({businessId:e,inviteId:s,type:t,onSuccess:a,onError:i})=>async(E,S)=>{let l=S(),d=(0,r.t_)(l);E({type:"RESEND_INVITE"});try{await (0,n.c_)({businessId:e,inviteId:s,type:"MEMBER"===t?"MEMBER_INVITE":"PARTNER_INVITE"}),a(),E({type:"RESEND_INVITE_SUCCESS"}),E((0,_.R)(d,t,e))}catch(e){E({type:"RESEND_INVITE_ERROR",error:e}),i(e.message)}},T=({businessId:e,requestId:s,onSuccess:t,onError:a})=>async(i,E)=>{let S=E(),l=(0,r.t_)(S);i({type:"DECLINE_REQUEST"});try{await (0,n.ED)({requestId:s,accept:!1}),t(),i({type:"DECLINE_REQUEST"}),i((0,_.R)(l,"PARTNER",e))}catch(e){i({type:"DECLINE_REQUEST_ERROR",error:e}),a(e.message,e.code)}},p=({businessId:e,requestId:s,acceptedRole:t,acceptedAssets:i,onSuccess:E,onError:S})=>async(l,d)=>{let c=d(),o=(0,r.t_)(c),u=i?Object.keys(i).filter(e=>!(0===i[e].length||i[e].includes("NO_ACCESS"))).reduce((e,s)=>({...e,[s]:i[s]}),{}):void 0;l({type:"ACCEPT_REQUEST"});try{await (0,n.ED)({requestId:s,accept:!0,role:t,resources:u}),l((0,a._P)(s)),E(),l({type:"ACCEPT_REQUEST"}),l((0,_.R)(o,"PARTNER",e))}catch(e){l({type:"ACCEPT_REQUEST_ERROR",error:e}),S(e.message,e.code)}},I=({businessId:e,requestId:s,onSuccess:t,onError:i})=>async(E,S)=>{let l=S(),d=(0,r.t_)(l);E({type:"DELETE_REQUEST"});try{await (0,n.UF)({businessId:e,inviteId:s,type:"PARTNER_REQUEST"}),t(),E({type:"DELETE_REQUEST_SUCCESS"}),E((0,a._P)(s)),E((0,_.R)(d,"PARTNER",e))}catch(e){E({type:"DELETE_REQUEST_ERROR",error:e}),i(e.message)}},y=({businessId:e,requestId:s,onSuccess:t,onError:a})=>async(i,E)=>{let S=E(),l=(0,r.t_)(S);i({type:"RESEND_INVITE"});try{await (0,n.c_)({businessId:e,inviteId:s,type:"PARTNER_REQUEST"}),t(),i({type:"RESEND_INVITE_SUCCESS"}),i((0,_.R)(l,"PARTNER",e))}catch(e){i({type:"RESEND_INVITE_ERROR",error:e}),a(e.message,e.code)}}},523909:(e,s,t)=>{t.d(s,{Bw:()=>i,L3:()=>_,Mm:()=>r,_P:()=>E,pV:()=>n});var a=t(662297);let _=(e,s,t=!1)=>async _=>{let n={id:s,type:"MEMBER_INVITE",filters:{invite_status:e}};_({type:"GET_PEOPLE_INVITES"});try{let{data:{data:s=[],total_data_count:r}={}}=await (0,a.Bc)(n),{ids:i,data:E}=s.reduce((e,s)=>(e.ids.push(s.id),e.data={...e.data,[s.id]:s},e),{ids:[],data:{}});_({type:"GET_PEOPLE_INVITES_SUCCESS",payload:{...n,ids:i,data:E,totalCount:r,inviteStatus:e,type:"people",updateDataOnly:t}})}catch(e){_({type:"GET_PEOPLE_INVITES_ERROR",error:e})}},n=(e,s)=>async t=>{let _={id:s,type:"PARTNER_INVITE",filters:{invite_status:e}};t({type:"GET_PARTNERS_INVITES"});try{let{data:{data:s=[],total_data_count:n}={}}=await (0,a.Bc)(_),{ids:r,data:i}=s.reduce((e,s)=>(e.ids.push(s.id),e.data={...e.data,[s.id]:s},e),{ids:[],data:{}});t({type:"GET_PARTNERS_INVITES_SUCCESS",payload:{..._,ids:r,data:i,totalCount:n,inviteStatus:e,type:"partner"}})}catch(e){t({type:"GET_PARTNERS_INVITES_ERROR",error:e})}},r=(e,s,t=!1)=>async _=>{let n={id:s,filters:{invite_status:e}};_({type:"GET_PARTNERS_REQUESTS"});try{let{data:{data:s=[],total_data_count:r}={}}=await (0,a.XJ)(n),{ids:i,data:E}=s.reduce((e,s)=>(e.ids.push(s.id),e.data={...e.data,[s.id]:s},e),{ids:[],data:{}});_({type:"GET_PARTNERS_REQUESTS_SUCCESS",payload:{...n,ids:i,data:E,totalCount:r,requestStatus:e,type:"partner",updateDataOnly:t}})}catch(e){_({type:"GET_PARTNERS_REQUESTS_ERROR",error:e})}},i=e=>async s=>{s({type:"CLEAR_INVITE",payload:{id:e}})},E=e=>async s=>{s({type:"CLEAR_REQUEST",payload:{id:e}})}},704454:(e,s,t)=>{t.d(s,{R:()=>n});var a=t(326884),_=t(362746);let n=(e,s,t,n=!1,r=!1)=>async i=>{let E={id:t,is_member:"MEMBER"===s,filters:{invite_status:e},...r&&a.vk};i({type:"MEMBER"===s?"GET_PENDING_PEOPLE":"GET_PENDING_PARTNERS"});try{let{data:{data:t=[],total_data_count:a}={}}=await (0,_.R)(E),{ids:r,data:S}=t.reduce((e,s)=>(e.ids.push(s.id),e.data={...e.data,[s.id]:s},e),{ids:[],data:{}});i({type:"MEMBER"===s?"GET_PENDING_PEOPLE_SUCCESS":"GET_PENDING_PARTNERS_SUCCESS",payload:{...E,ids:r,data:S,totalCount:a,inviteStatus:e,updateDataOnly:n}})}catch(e){i({type:"MEMBER"===s?"GET_PENDING_PEOPLE_ERROR":"GET_PENDING_PARTNERS_ERROR",error:e})}}},913033:(e,s,t)=>{t.d(s,{p:()=>E,U:()=>i});var a=t(983722),_=t(186656);let n=async()=>{var e,s;let{anyEnabled:t}=null!==(e=null===(s=(0,a.Z)())||void 0===s?void 0:s.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==e?e:{};if(t){let e=await (0,_.Z)({url:"ads/v4/business_access/invites"});return e.resource_response}let n=await (0,_.Z)({url:"/ads/internal/business_access/invites/"});return n.resource_response};var r=t(39662);let i=async e=>{e({type:"GET_VIEWER_INVITES"});try{let{data:{data:s}}=await n();e({type:"GET_VIEWER_INVITES_SUCCESS",payload:{data:s}})}catch(s){e({type:"GET_VIEWER_INVITES_ERROR",error:s})}},E=async(e,s)=>{let t=s(),a=(0,r.O)(t);a||e(i)}},662297:(e,s,t)=>{t.d(s,{Bc:()=>r,ED:()=>c,KD:()=>T,Ts:()=>i,UF:()=>S,XJ:()=>d,c_:()=>l,hd:()=>u,oK:()=>R,t$:()=>E,uN:()=>y,vV:()=>o,xW:()=>p});var a=t(983722),_=t(186656),n=t(251819);let r=async({id:e,type:s,filters:t})=>{var n,r;let{anyEnabled:i}=null!==(n=null===(r=(0,a.Z)())||void 0===r?void 0:r.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==n?n:{};if(i){let a=await (0,_.Z)({url:`/ads/v4/business_access/businesses/${e}/invites_and_requests/`,data:{is_member:"MEMBER_INVITE"===s,filters:JSON.stringify({invite_type:s,...t})}});return a.resource_response}let E=await (0,_.Z)({url:`/ads/internal/business_access/businesses/${e}/invites/`,method:"GET",data:{type:s,filters:t?JSON.stringify(t):void 0}});return E.resource_response},i=async({businessId:e,inviteOrRequestId:s,type:t})=>{var n,r;let{anyEnabled:i}=null!==(n=null===(r=(0,a.Z)())||void 0===r?void 0:r.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==n?n:{};if(i){let a=await (0,_.Z)({url:`/ads/v4/business_access/businesses/${e}/invites/${s}/`,data:{invite_type:t}});return a.resource_response}let E=await (0,_.Z)({url:`/ads/internal/business_access/businesses/${e}/invites/${s}/`,data:{type:t}});return E.resource_response},E=async({businessId:e,inviteIds:s})=>{let t=await (0,_.Z)({url:`/ads/v4/business_access/businesses/${e}/invites`,data:{invite_or_request_ids:s,invite_type:"MEMBER_INVITE"}});return t.resource_response},S=async({businessId:e,inviteId:s,type:t})=>{var n,r;let{anyEnabled:i}=null!==(n=null===(r=(0,a.Z)())||void 0===r?void 0:r.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==n?n:{};if(i){let a=await (0,_.Z)({url:`/ads/v4/business_access/businesses/${e}/invites/${s}/`,method:"DELETE",data:{type:t}});return a.resource_response}let E=await (0,_.Z)({url:`/ads/internal/business_access/businesses/${e}/invites/${s}/`,method:"DELETE",data:{type:t}});return E.resource_response},l=async({businessId:e,inviteId:s,type:t})=>{var n,r;let{anyEnabled:i}=null!==(n=null===(r=(0,a.Z)())||void 0===r?void 0:r.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==n?n:{};if(i){let a=await (0,_.Z)({url:`/ads/v4/business_access/businesses/${e}/invites/${s}/`,method:"PUT",data:{invite_type:t}});return a.resource_response}let E=await (0,_.Z)({url:`/ads/internal/business_access/businesses/${e}/invites/${s}/`,method:"PUT",data:{type:t}});return E.resource_response},d=async({id:e,filters:s})=>{var t,n;let{anyEnabled:r}=null!==(t=null===(n=(0,a.Z)())||void 0===n?void 0:n.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==t?t:{};if(r){let t=await (0,_.Z)({url:`/ads/v4/business_access/businesses/${e}/invites_and_requests/`,data:{is_member:!1,filters:JSON.stringify({invite_type:"PARTNER_REQUEST",...s})}});return t.resource_response}let i=await (0,_.Z)({url:`/ads/internal/business_access/businesses/${e}/invites/`,method:"GET",data:{type:"PARTNER_REQUEST",assets_summary:!0,filters:s?JSON.stringify(s):void 0}});return i.resource_response},c=async({requestId:e,role:s,resources:t,accept:r})=>{var i,E;let S={accept:r};s&&(S.role_name=s),t&&!(0,n.Z)(t)&&(S.resource_id_to_roles=JSON.stringify(t));let{anyEnabled:l}=null!==(i=null===(E=(0,a.Z)())||void 0===E?void 0:E.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==i?i:{};if(l){let s=await (0,_.Z)({url:`/ads/v4/business_access/requests/${e}/`,method:"POST",data:{...t&&!(0,n.Z)(t)&&{resource_id_to_roles:JSON.stringify(t)},accept_request:r}});return s.resource_response}let d=await (0,_.Z)({url:`/ads/internal/business_access/requests/${e}/`,method:"POST",data:S});return d.resource_response},o=async({requestee:e,asset:s,requester:t})=>{var n,r;let{anyEnabled:i}=null!==(n=null===(r=(0,a.Z)())||void 0===r?void 0:r.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==n?n:{};if(i){let a=await (0,_.Z)({url:"/ads/v4/business_access/request/entitlement/",method:"GET",data:{requestee_id:e,asset_id:s,requester_id:t}});return a.resource_response}let E=await (0,_.Z)({url:"/ads/internal/business_access/request/entitlement/",method:"GET",data:{requestee:e,asset:s,requester:t}});return E.resource_response},u=async e=>{let s=await (0,_.Z)({url:"ads/v4/business_access/business_hierarchy_invites/unauth/",method:"GET",data:{token:e}});return s.resource_response},A=async(e,s)=>(0,_.Z)({url:"ads/v4/business_access/business_hierarchy_invites/unauth/",method:"PATCH",data:{token:s,action:e}}),T=async e=>A("ACCEPT",e),p=async e=>A("REJECT",e),I=async(e,s)=>(0,_.Z)({url:"/ads/v4/business_access/invites/unauth_respond/",method:"POST",data:{token:s,accept_invite:e}}),y=async e=>I(!0,e),R=async e=>I(!1,e)},362746:(e,s,t)=>{t.d(s,{R:()=>n});var a=t(983722),_=t(186656);let n=async({id:e,is_member:s,filters:t})=>{var n,r;let{anyEnabled:i}=null!==(n=null===(r=(0,a.Z)())||void 0===r?void 0:r.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==n?n:{};if(i){let a=await (0,_.Z)({url:`/ads/v4/business_access/businesses/${e}/invites_and_requests/`,data:{is_member:s,assets_summary:!0,filters:JSON.stringify(t)}});return a.resource_response}{let a=await (0,_.Z)({url:`/ads/internal/business_access/businesses/${e}/invites_and_requests/`,data:{is_member:s,assets_summary:!0,filters:JSON.stringify(t),render_style:"invitebizrolesbinding.extended_user_info()",fields:["user.image_small_url","user.full_name,user.username"]}});return a.resource_response}}},320843:(e,s,t)=>{t.d(s,{$A:()=>d,Ak:()=>l,Gc:()=>c,Iw:()=>i,ai:()=>S,t_:()=>o});var a=t(442279),_=t(773285),n=t(617126);let r=(0,a.P1)(n.Z,({pending:e})=>null!=e?e:{}),i=(0,a.P1)(r,({loading:e})=>e),E=(0,a.P1)(r,({loading:e})=>e),S=(0,a.P1)(r,({people:e})=>null!=e?e:{}),l=(0,a.P1)(r,({partner:e})=>null!=e?e:{}),d=(0,a.P1)(l,e=>Object.keys(e).length>0),c=e=>(0,a.P1)(l,E,(s,t)=>{if(t)return;let{checkExperiment:a}=(0,_.F)(),{anyEnabled:n}=a("business_access_invites_api_v4_migration"),r=Object.keys(s).filter(t=>n?s[t].created_by_business.id!==e:s[t].created_by_biz.id!==e);return r&&r.length>0}),o=(0,a.P1)(r,({type:e})=>e)},617126:(e,s,t)=>{t.d(s,{Z:()=>a});let a=({businessAccess:e})=>null!=e?e:{}},39662:(e,s,t)=>{t.d(s,{O:()=>i,U:()=>S});var a=t(442279),_=t(617126);let n=(0,a.P1)(_.Z,({viewerInvites:e})=>null!=e?e:{data:[]}),r=(0,a.P1)(n,({data:e})=>null!=e?e:[]),i=(0,a.P1)(n,({data:e})=>e.length>0),E=(0,a.P1)(r,e=>e.filter(({invite_data:{invite_status:e}})=>"PENDING"===e)),S=(0,a.P1)(E,e=>e.map(({id:e,created_by_biz:s,created_by_business:t,extended_user_info:{full_name:a,username:_},user:{id:n}})=>({id:e,businessId:(null==s?void 0:s.id)||(null==t?void 0:t.id),businessName:null!=a?a:_,userId:n})))},721344:(e,s,t)=>{t.d(s,{XI:()=>_,YZ:()=>r,rc:()=>n,sU:()=>S});var a=t(667294);function _(e){let[s,t]=(0,a.useState)(!1),_=()=>t(!0),n=()=>t(!1);return(0,a.useEffect)(()=>{let{current:s}=e;return s&&(s.addEventListener("mouseenter",_),s.addEventListener("mouseleave",n)),()=>{s&&(s.removeEventListener("mouseenter",_),s.removeEventListener("mouseleave",n))}}),s}let n=e=>{let s=(0,a.useRef)(e);return(0,a.useEffect)(()=>{s.current=e}),s.current};function r(){let e=(0,a.useRef)(!0);return(0,a.useEffect)(()=>{e.current=!1},[]),e.current}function i(e,s){return Object.is(e,s)}let E=Symbol("pre-initial value");function S(e,{equal:s=i,delta:t}={equal:i}){let _=(0,a.useRef)(E),n=_.current;return(0,a.useEffect)(()=>{_.current=e}),{previousValue:n,changed:n===E||!s(n,e),delta:null==t?void 0:t(n,e)}}},273453:(e,s,t)=>{t.d(s,{sO:()=>o,Dw:()=>R,HL:()=>c,nC:()=>p,MC:()=>T,nU:()=>A,jn:()=>N,vg:()=>m,dd:()=>O,Sx:()=>I,Dl:()=>C,Un:()=>y,KJ:()=>u});var a=t(667294),_=t(616550),n=t(425288),r=t(773285);let i={payload:{},type:null},E={businessId:"",business:null,managerId:"",manager:null,businessHierarchyId:"",businessHierarchy:null,detailId:"",profile:null,adAccount:null,partnerId:"",employeeId:"",intents:i,modal:{modalType:null}};function S(e=E,s){var t,a,_,n,r,S,l,d;switch(s.type){case"SET_ROUTER_PARAMS":return{...e,businessId:null!==(t=s.payload.businessId)&&void 0!==t?t:"",detailId:null!==(a=s.payload.detailId)&&void 0!==a?a:""};case"SET_SELECTED_BUSINESS":return{...e,businessId:null!==(_=null===(n=s.payload.business)||void 0===n?void 0:n.user.id)&&void 0!==_?_:"",business:s.payload.business};case"SET_SELECTED_BUSINESS_HIERARCHY":return{...e,businessHierarchyId:(null===(r=s.payload.businessHierarchy)||void 0===r?void 0:r.id)||"",businessHierarchy:s.payload.businessHierarchy};case"SET_SELECTED_ORGANIZATION_MANAGER":return{...e,managerId:null!==(S=null===(l=s.payload.manager)||void 0===l?void 0:l.user.id)&&void 0!==S?S:"",manager:s.payload.manager};case"SET_SELECTED_DETAIL":return{...e,detailId:null!==(d=s.payload.detailId)&&void 0!==d?d:""};case"SET_SELECTED_PROFILE":return{...e,profile:s.payload.profile};case"SET_SELECTED_AD_ACCOUNT":return{...e,adAccount:s.payload.adAccount};case"SET_SELECTED_PARTNER_ID":return{...e,partnerId:s.payload.partnerId};case"SET_SELECTED_EMPLOYEE_ID":return{...e,employeeId:s.payload.employeeId};case"CLEAR_INTENT":case"OPEN_SHEET":return{...e,intents:function(e,s){switch(s.type){case"CLEAR_INTENT":return i;case"OPEN_SHEET":let{type:t,payload:a}=s;return{type:t,payload:a};default:return e}}(e.intents,s)};case"SET_MODAL":case"CLEAR_MODAL":return{...e,modal:function(e,s){switch(s.type){case"SET_MODAL":return s.payload;case"CLEAR_MODAL":return{modalType:null};default:return e}}(e.modal,s)};default:return e}}var l=t(785893);let{Provider:d,useHook:c}=(0,n.Z)("BusinessAccess");function o({children:e}){let[s,t]=(0,a.useReducer)(S,E),_=(0,a.useMemo)(()=>({setRouterParams:({detailId:e,businessId:s})=>t({type:"SET_ROUTER_PARAMS",payload:{detailId:e,businessId:s}}),setSelectedBusiness:e=>t({type:"SET_SELECTED_BUSINESS",payload:{business:e}}),setSelectedOrganizationManager:e=>t({type:"SET_SELECTED_ORGANIZATION_MANAGER",payload:{manager:e}}),setSelectedBusinessHierarchy:e=>t({type:"SET_SELECTED_BUSINESS_HIERARCHY",payload:{businessHierarchy:e}}),setSelectedDetail:({detailId:e})=>t({type:"SET_SELECTED_DETAIL",payload:{detailId:e}}),setSelectedProfile:e=>t({type:"SET_SELECTED_PROFILE",payload:{profile:e}}),setSelectedAdAccount:e=>t({type:"SET_SELECTED_AD_ACCOUNT",payload:{adAccount:e}}),setSelectedPartnerId:e=>t({type:"SET_SELECTED_PARTNER_ID",payload:{partnerId:null!=e?e:""}}),setSelectedEmployeeId:e=>t({type:"SET_SELECTED_EMPLOYEE_ID",payload:{employeeId:null!=e?e:""}}),clearIntent:()=>t({type:"CLEAR_INTENT"}),openSheet:e=>t({type:"OPEN_SHEET",payload:e}),setAddPeopleModal:()=>t({type:"SET_MODAL",payload:{modalType:"CREATE_PEOPLE"}}),setAddPeopleInviteConfirmationModal:({inviteIds:e,role:s,isPendingTabActive:a})=>t({type:"SET_MODAL",payload:{modalType:"CREATE_PEOPLE_INVITE_CONFIRMATION",modalProps:{inviteIds:e,role:s,isPendingTabActive:a}}}),setAddPeopleInviteWithAssetsConfirmationModal:({inviteIds:e,invitedPeopleIdentifiers:s})=>t({type:"SET_MODAL",payload:{modalType:"CREATE_PEOPLE_INVITE_WITH_ASSETS_CONFIRMATION",modalProps:{inviteIds:e,invitedPeopleIdentifiers:s}}}),setAddPartnerInviteConfirmationModal:({selectedId:e,role:s,inviteId:a})=>t({type:"SET_MODAL",payload:{modalType:"CREATE_PARTNER_INVITE_CONFIRMATION",modalProps:{selectedId:e,role:s,inviteId:a}}}),setRemovePersonModal:e=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_PERSON",modalProps:e}}),setRemoveProfilePermissionsModal:({userData:e,selectionType:s,profileId:a,profileName:_,dataToRefresh:n,refreshData:r})=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_PROFILE_PERMISSIONS",modalProps:{userData:e,selectionType:s,profileId:a,profileName:_,dataToRefresh:n,refreshData:r}}}),setEditPersonRoleModal:e=>t({type:"SET_MODAL",payload:{modalType:"EDIT_PERSON_ROLE",modalProps:e}}),setInviteRequestPartnerModal:e=>t({type:"SET_MODAL",payload:{modalType:"INVITE_REQUEST_PARTNER",modalProps:{partnershipType:null==e?void 0:e.partnershipType,pageForLogger:null==e?void 0:e.pageForLogger}}}),setRequestPartnerConfirmationModal:({partnerId:e,role:s,requestId:a})=>t({type:"SET_MODAL",payload:{modalType:"CREATE_PARTNER_REQUEST_CONFIRMATION",modalProps:{partnerId:e,role:s,requestId:a}}}),setRequestPartnerConfirmationSuccessModal:({requestId:e})=>t({type:"SET_MODAL",payload:{modalType:"CREATE_PARTNER_REQUEST_CONFIRMATION_SUCCESS",modalProps:{requestId:e}}}),setRemoveChildBusinessModal:()=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_CHILD_BUSINESS"}}),setRemoveOrganizationManagerModal:()=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_ORGANIZATION_MANAGER"}}),setRemovePartnerModal:e=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_PARTNER",modalProps:{...e}}}),setRemoveSharedPartnerModal:e=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_SHARED_PARTNER",modalProps:{...e}}}),setRemoveSharedAdAccountModal:e=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_SHARED_AD_ACCOUNT",modalProps:{...e}}}),setCreateAdAccountModal:()=>t({type:"SET_MODAL",payload:{modalType:"CREATE_AD_ACCOUNT"}}),setCreateAdAccountConfirmationModal:({ownerInfo:e,accountInfo:s,refreshData:a})=>t({type:"SET_MODAL",payload:{modalType:"CREATE_AD_ACCOUNT_CONFIRMATION",modalProps:{accountInfo:s,ownerInfo:e,refreshData:a}}}),setAssignAdAccountsModal:({selectedIds:e,selectionType:s,dataToRefresh:a,assignmentType:_,inviteIds:n,peopleIdentifiers:r,roleType:i,showProfiles:E})=>t({type:"SET_MODAL",payload:{modalType:"ASSIGN_AD_ACCOUNTS",modalProps:{selectedIds:e,selectionType:s,dataToRefresh:a,assignmentType:_,peopleIdentifiers:r,inviteIds:n,roleType:i,showProfiles:E}}}),setRequestAdAccountsModal:({requestId:e,partnerId:s})=>t({type:"SET_MODAL",payload:{modalType:"REQUEST_AD_ACCOUNTS",modalProps:{requestId:e,partnerId:s}}}),setRequestAdAccountsGeneralModal:({partner:e,adAccountsRequested:s})=>t({type:"SET_MODAL",payload:{modalType:"REQUEST_AD_ACCOUNTS_GENERAL",modalProps:{partner:e,adAccountsRequested:s}}}),setEditAdAccountAccessModal:({resourceId:e,principalId:s,dataToRefresh:a,assignmentType:_,rolesForAoaa:n,clientBusinessId:r})=>t({type:"SET_MODAL",payload:{modalType:"EDIT_AD_ACCOUNT_ACCESS",modalProps:{resourceId:e,principalId:s,dataToRefresh:a,assignmentType:_,rolesForAoaa:n,clientBusinessId:r}}}),setRemoveAdAccountAccessModal:({resourceId:e,principalId:s,dataToRefresh:a,assignmentType:_})=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_AD_ACCOUNT_ACCESS",modalProps:{resourceId:e,principalId:s,dataToRefresh:a,assignmentType:_}}}),setOnboardingModal:({onComplete:e,onDismiss:s})=>t({type:"SET_MODAL",payload:{modalType:"ONBOARDING",modalProps:{onComplete:e,onDismiss:s}}}),setSwitchAdAccountModal:({id:e,name:s,owner_user_id:a,merchant_id:_})=>t({type:"SET_MODAL",payload:{modalType:"SWITCH_AD_ACCOUNT",modalProps:{id:e,name:s,owner_user_id:a,merchant_id:_}}}),setAssignProfilesModal:({selectedIds:e,selectionType:s,dataToRefresh:a,assignmentType:_,refreshData:n})=>t({type:"SET_MODAL",payload:{modalType:"ASSIGN_PROFILES",modalProps:{selectedIds:e,selectionType:s,dataToRefresh:a,assignmentType:_,refreshData:n}}}),setAssignAssetsModal:({selectedIds:e,inviteId:s,dataToRefresh:a})=>t({type:"SET_MODAL",payload:{modalType:"ASSIGN_ASSETS",modalProps:{selectedIds:e,inviteId:s,dataToRefresh:a}}}),setRequestProfileAccessModal:({requestId:e,requesteeId:s,adAccounts:a})=>t({type:"SET_MODAL",payload:{modalType:"REQUEST_PROFILE_ACCESS",modalProps:{requestId:e,requesteeId:s,adAccounts:a}}}),setRequestProfileAccessGeneralModal:()=>t({type:"SET_MODAL",payload:{modalType:"REQUEST_PROFILE_ACCESS_GENERAL"}}),setAssetGroupsFormModal:e=>t({type:"SET_MODAL",payload:{modalType:"ASSET_GROUPS_FORM",modalProps:e}}),setShareTagModal:e=>t({type:"SET_MODAL",payload:{modalType:"SHARE_TAG_FORM",modalProps:e}}),setShareTagSummaryModal:e=>t({type:"SET_MODAL",payload:{modalType:"SHARE_TAG_SUMMARY_FORM",modalProps:e}}),setShareTagLegalModal:e=>t({type:"SET_MODAL",payload:{modalType:"SHARE_TAG_LEGAL_FORM",modalProps:e}}),setTagGetStartedModal:e=>t({type:"SET_MODAL",payload:{modalType:"SHARE_TAG_GET_STARTED_FORM",modalProps:e}}),setDeleteAssetGroupConfirmationModal:e=>t({type:"SET_MODAL",payload:{modalType:"DELETE_ASSET_GROUP_CONFIRMATION",modalProps:e}}),setAOAAPermissionAssignmentModal:({partnerBusinessInfo:e,ownerInfo:s,accountInfo:a})=>t({type:"SET_MODAL",payload:{modalType:"AOAA_PERMISSION_ASSIGNMENT",modalProps:{partnerBusinessInfo:e,ownerInfo:s,accountInfo:a}}}),setUnsavedPermissionsConfirmationModal:({partnerBusinessInfo:e,ownerInfo:s,accountInfo:a})=>t({type:"SET_MODAL",payload:{modalType:"UNSAVED_PERMISSIONS_CONFIRMATION",modalProps:{partnerBusinessInfo:e,ownerInfo:s,accountInfo:a}}}),setAOAARequestCreationSuccessModal:({partnerBusinessInfo:e,ownerInfo:s,businessIdToPermissions:a})=>t({type:"SET_MODAL",payload:{modalType:"AOAA_REQUEST_CREATION_SUCCESS",modalProps:{partnerBusinessInfo:e,ownerInfo:s,businessIdToPermissions:a}}}),setAddAssetOrUserToAssetGroup:({assetOrMemberType:e,assetGroupInfo:s})=>t({type:"SET_MODAL",payload:{modalType:"ADD_ASSET_OR_USER_TO_ASSET_GROUP",modalProps:{assetOrMemberType:e,assetGroupInfo:s}}}),setAddUserToAssetGroupConfirmation:e=>t({type:"SET_MODAL",payload:{modalType:"ADD_USER_TO_ASSET_GROUP_CONFIRMATION",modalProps:e}}),setRemoveAssetOrUserFromAssetGroup:({assetOrMemberType:e,toRemove:s})=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_ASSET_OR_USER_TO_ASSET_GROUP",modalProps:{assetOrMemberType:e,toRemove:s}}}),setRemoveAssetFromTag:({assetOrMemberType:e,toRemove:s})=>t({type:"SET_MODAL",payload:{modalType:"REMOVE_ASSET_FROM_TAG",modalProps:{assetOrMemberType:e,toRemove:s}}}),setAddOrganizationManagersModal:e=>t({type:"SET_MODAL",payload:{modalType:"ADD_ORGANIZATION_MANAGERS",modalProps:{...e}}}),setAddOrganizationManagersConfirmationModal:e=>t({type:"SET_MODAL",payload:{modalType:"ADD_ORGANIZATION_MANAGERS_CONFIRMATION",modalProps:{...e}}}),setEditBusinessDetailsModal:e=>t({type:"SET_MODAL",payload:{modalType:"EDIT_BUSINESS_DETAILS",modalProps:e}}),setViewBusinessDetailsModal:e=>t({type:"SET_MODAL",payload:{modalType:"VIEW_BUSINESS_DETAILS",modalProps:e}}),setAddChildBusinessesModal:e=>t({type:"SET_MODAL",payload:{modalType:"ADD_CHILD_BUSINESSES",modalProps:{...e}}}),setAddChildBusinessesConfirmationModal:e=>t({type:"SET_MODAL",payload:{modalType:"ADD_CHILD_BUSINESSES_CONFIRMATION",modalProps:e}}),setSelectAdAccountToShareFromModal:()=>t({type:"SET_MODAL",payload:{modalType:"SELECT_AD_ACCOUNT_TO_SHARE_FROM"}}),setAddAdAccountModal:()=>t({type:"SET_MODAL",payload:{modalType:"ADD_AD_ACCOUNT"}}),setConfirmAssetAccessRequestModal:e=>t({type:"SET_MODAL",payload:{modalType:"CONFIRM_ASSET_ACCESS_REQUEST",modalProps:e}}),setCreateBusinessHierarchyModal:e=>{t({type:"SET_MODAL",payload:{modalType:"CREATE_BUSINESS_HIERARCHY",modalProps:e}})},clearModal:()=>t({type:"CLEAR_MODAL"})}),[]),n=(0,a.useMemo)(()=>({businessAccess:s,..._}),[s,_]);return(0,l.jsx)(d,{value:n,children:e})}function u(e=!1){let{checkExperiment:s}=(0,r.F)(),{anyEnabled:t}=s("web_business_access_table_reload_fix"),{anyEnabled:a}=s("web_m10n_business_hierarchy_beta"),{businessAccess:{businessId:n}}=c(),{params:{userBizId:i}}=(0,_.useRouteMatch)();return a&&e?n:t?null!=i?i:"":n}function A(e=!1){let{checkExperiment:s}=(0,r.F)(),{anyEnabled:t}=s("web_business_access_table_reload_fix"),{anyEnabled:a}=s("web_m10n_business_hierarchy_beta"),{businessAccess:{detailId:n}}=c(),{params:{detailId:i}}=(0,_.useRouteMatch)();return a&&e?n:t?null!=i?i:"":n}function T(){let{checkExperiment:e}=(0,r.F)(),{anyEnabled:s}=e("web_m10n_business_hierarchy_beta"),{businessAccess:{business:t}}=c();return s?t:null}function p(){let{businessAccess:{businessHierarchy:e}}=c();return e}function I(){let{checkExperiment:e}=(0,r.F)(),{anyEnabled:s}=e("web_m10n_business_hierarchy_beta"),{businessAccess:{manager:t}}=c();return s?t:null}function y(){let{checkExperiment:e}=(0,r.F)(),{anyEnabled:s}=e("web_m10n_business_hierarchy_beta"),{businessAccess:{profile:t}}=c();return s?t:null}function R(){let{checkExperiment:e}=(0,r.F)(),{anyEnabled:s}=e("web_m10n_business_hierarchy_beta"),{businessAccess:{adAccount:t}}=c();return s?t:null}function C(){let{businessAccess:{partnerId:e}}=c();return e}function N(){let{checkExperiment:e}=(0,r.F)(),{anyEnabled:s}=e("web_m10n_business_hierarchy_beta"),{businessAccess:{employeeId:t}}=c();return s?t:""}function m(){let{businessAccess:{intents:e}}=c();return e}function O(){let{businessAccess:{modal:e}}=c();return e}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/partner-business-access-react-businessHubBanners-BusinessAccessBusinessHubBanner.ru_RU-313d4c2057b206b5.mjs.map